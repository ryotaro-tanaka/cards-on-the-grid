# 概要：Ralph Wiggum Loop（ラルフ・ウィガム・ループ）とは何か

------------------------------------------------------------------------

## 1. 問題提起：AIは速くなっても人間がボトルネック

話の出発点は、

> 「寝る前にAIに頼んで、朝起きたらPRが完成している世界は実現できないか？」

という問いです。

現状は、

-   AIに依頼
-   出力を確認
-   修正して再依頼
-   また確認

という"人間待ちループ"が発生しており、\
**AIが高速化しても、人間の確認時間は減らない**という構造的ボトルネックがある、という問題意識が提示されています。

------------------------------------------------------------------------

## 2. Ralph Wiggum Loopとは？

### 本質

**「AIが完了するまで自律的に回り続ける設計手法」**

名前の由来：

-   ラルフ（シンプソンズのキャラ）＝失敗しても気にせず何度も試す存在
-   1980年代スラングで "ralph" = 吐く（= コードを吐き続けるAI）

> 失敗を気にせず、結果が出るまで繰り返すAIの象徴

------------------------------------------------------------------------

## 3. 技術的な核心：たった1行のループ

``` bash
while cat prompt.md | claudecode; do :; done
```

ポイント：

-   毎回同じプロンプトを投げる
-   ただし、リポジトリ状態が変わる
-   AIは前回生成したファイルを読み、次の行動を決める

> 人間がやっていた"確認して再実行"をスクリプト化しただけ

------------------------------------------------------------------------

## 4. 状態はLLM内ではなく「外部」に置く

通常のチャット型AIは：

-   会話履歴に依存
-   セッション終了で消える
-   長くなると情報が薄れる
-   失敗ログに引きずられる（コンテキスト汚染）

### 解決策

状態をすべてファイルに出す：

-   `tasks.json`
-   `progress.txt`
-   Gitコミット履歴

メリット：

-   Gitで追跡可能
-   ロールバック可能
-   進捗が客観的証拠として残る
-   セッションを毎回リセットできる

> 「AIにノートを持たせる」設計

------------------------------------------------------------------------

## 5. 安全装置（最重要）

### ① 完了判定

-   JSON形式の完了シグナル
-   テスト通過
-   キーワード
-   Git変更

→ 複数証拠をスコア化して判断

### ② サーキットブレーカー

条件例：

-   3ループ連続で進捗なし
-   同じエラー5回
-   ビルド失敗連続

→ 強制停止\
→ Slack通知\
→ 冷却後テスト再開

> 危ないからやらないのではなく、危ないから設計する

------------------------------------------------------------------------

## 6. マルチエージェント化

役割分担：

-   実装担当
-   原因調査担当
-   ドキュメント担当
-   コード探索担当

利点：

-   詰まり箇所の特定が容易
-   デバッグしやすい
-   タスク未完了を強制継続可能

------------------------------------------------------------------------

## 7. 誇張への注意

「100倍速」などは過剰表現。

ボトルネックは残る：

-   CI実行時間
-   APIレート制限
-   外部依存
-   承認待ち

AIの思考時間は短縮できても、物理的待ち時間は短縮できない。

------------------------------------------------------------------------

## 8. 実践のポイント

### 良い完了条件

悪い例： - 「ログイン機能を実装する」

良い例： - POST /login が200を返す - JWT発行 - 誤パスワードで401

→ Yes/Noで判定可能にする

### タスク粒度

目安：

-   小規模：5〜10ループ
-   中規模：20〜30
-   大規模：50

50超えるなら分割すべき。

------------------------------------------------------------------------

## 9. 本質まとめ

Ralph Wiggum Loopの本質：

1.  反復（Loop）
2.  外部状態（Files / Git）
3.  終了条件（Exit + Breaker）

この3つが揃って自律が成立する。

------------------------------------------------------------------------

## 10. 設計思想

> 「失敗しても続けられる仕組みを作る」

-   失敗を観測
-   記録
-   停止
-   改善

メンタルに頼らない。仕組みに頼る。

------------------------------------------------------------------------

# 一文まとめ

**Ralph Wiggum
Loopとは、AIを"感情のない執拗な作業者"として、外部状態と安全装置を組み合わせて自律的に回し続ける設計手法である。**
